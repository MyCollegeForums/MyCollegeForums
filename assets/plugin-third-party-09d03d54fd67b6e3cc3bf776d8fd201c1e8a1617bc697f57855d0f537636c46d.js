define("discourse/plugins/discourse-narrative-bot/initializers/new-user-narrative",["exports","discourse/lib/plugin-api"],function(e,s){"use strict";function t(e){var s=e.container.lookup("message-bus:main"),t=e.getCurrentUser(),n=e.container.lookup("app-events:main");e.modifyClass("component:site-header",{didInsertElement:function(){this._super(),this.dispatch("header:search-context-trigger","header")}}),e.attachWidgetAction("header","headerSearchContextTrigger",function(){this.site.mobileView?this.state.skipSearchContext=!1:(this.state.contextEnabled=!0,this.state.searchContextType="topic")}),s&&t&&s.subscribe("/new_user_narrative/tutorial_search",function(){n.trigger("header:search-context-trigger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"new-user-narratve",initialize:function(e){e.lookup("site-settings:main").discourse_narrative_bot_enabled&&(0,s.withPluginApi)("0.8.7",t)}}}),Ember.TEMPLATES["javascripts/connectors/composer-fields/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["composer-presence-display"],null,[["action","post","topic","reply"],[[28,["model","action"]],[28,["model","post"]],[28,["model","topic"]],[28,["model","reply"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/composer-fields/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/composer-fields/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,s){return s.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/topic-above-footer-buttons/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["topic-presence-display"],null,[["topicId"],[[28,["model","id"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/topic-above-footer-buttons/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/topic-above-footer-buttons/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,s){return s.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/components/composer-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"      "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"\\n    "],[11,"span",[]],[15,"class","presence_text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[0,"\\n"],[6,["if"],[[28,["isReply"]]],null,{"statements":[[1,[33,["i18n"],["presence.replying"],null],false]],"locals":[]},{"statements":[[1,[33,["i18n"],["presence.editing"],null],false]],"locals":[]}],[14],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/composer-presence-display"}}),Ember.TEMPLATES["javascripts/components/topic-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"      "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"\\n    "],[11,"span",[]],[15,"class","presence-text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[1,[33,["i18n"],["presence.replying_to_topic"],[["count"],[[28,["users","length"]]]]],false],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/topic-presence-display"}}),define("discourse/plugins/discourse-presence/discourse/components/composer-presence-display",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/page-visible"],function(e,s,t,n){"use strict";function r(e,s,t,n,r){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce(function(t,n){return n(e,s,t)||t},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o,l,c,u,p,d;e.default=Ember.Component.extend((a=(0,t.on)("didInsertElement"),i=(0,t.on)("willDestroyElement"),o=(0,t.observes)("action","post","topic"),l=(0,t.observes)("presenceState"),c=(0,t.default)("presenceUsers","currentUser.id"),u=(0,t.default)("presenceState.action"),p=(0,t.default)("users.length"),d={composer:Ember.inject.controller(),action:null,post:null,topic:null,reply:null,oldPresenceState:null,presenceState:null,keepAliveTimer:null,messageBusChannel:null,presenceUsers:null,composerOpened:function(){this.updateStateObject()},composerClosing:function(){this.updateStateObject(!0)},composerStateChanged:function(){Ember.run.once(this,"updateStateObject")},updateStateObject:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=null;if(!e&&this.shouldSharePresence(this.get("action")))switch(s={},s.action=this.get("action"),s.action){case"edit":s.post_id=this.get("post.id");break;case"reply":s.topic_id=this.get("topic.id")}this.set("oldPresenceState",this.get("presenceState")),this.set("presenceState",s)},_ACTIONS:["edit","reply"],shouldSharePresence:function(e){return this._ACTIONS.includes(e)},presenceStateChanged:function(){var e=this;this.get("messageBusChannel")&&(this.messageBus.unsubscribe(this.get("messageBusChannel")),this.set("messageBusChannel",null)),this.set("presenceUsers",[]),(0,s.ajax)("/presence/publish",{type:"POST",data:{response_needed:!0,previous:this.get("oldPresenceState"),current:this.get("presenceState")}}).then(function(s){var t=s.messagebus_channel;if(t){var n=s.users,r=s.messagebus_id;e.set("presenceUsers",n),e.set("messageBusChannel",t),e.messageBus.subscribe(t,function(s){e.set("presenceUsers",s.users)},r)}}).catch(function(e){console.error("Error publishing composer status",e)}),Ember.run.cancel(this.get("keepAliveTimer")),this.shouldSharePresence(this.get("presenceState.action"))&&this.set("keepAliveTimer",Ember.run.later(this,"keepPresenceAlive",1e4))},keepPresenceAlive:function(){if(this.shouldSharePresence(this.get("presenceState.action"))){(0,n.default)()&&(0,s.ajax)("/presence/publish",{type:"POST",data:{current:this.get("presenceState")}}).catch(function(e){console.error("Error publishing composer status",e)}),Ember.run.cancel(this.get("keepAliveTimer")),this.set("keepAliveTimer",Ember.run.later(this,"keepPresenceAlive",1e4))}},users:function(e,s){return(e||[]).filter(function(e){return e.id!==s})},isReply:function(e){return"reply"===e},shouldDisplay:function(e){return e>0}},r(d,"composerOpened",[a],Object.getOwnPropertyDescriptor(d,"composerOpened"),d),r(d,"composerClosing",[i],Object.getOwnPropertyDescriptor(d,"composerClosing"),d),r(d,"composerStateChanged",[o],Object.getOwnPropertyDescriptor(d,"composerStateChanged"),d),r(d,"presenceStateChanged",[l],Object.getOwnPropertyDescriptor(d,"presenceStateChanged"),d),r(d,"users",[c],Object.getOwnPropertyDescriptor(d,"users"),d),r(d,"isReply",[u],Object.getOwnPropertyDescriptor(d,"isReply"),d),r(d,"shouldDisplay",[p],Object.getOwnPropertyDescriptor(d,"shouldDisplay"),d),d))}),define("discourse/plugins/discourse-presence/discourse/components/topic-presence-display",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,s,t){"use strict";function n(e,s,t,n,r){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce(function(t,n){return n(e,s,t)||t},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,s,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0});var r,a,i,o,l;e.default=Ember.Component.extend((r=(0,t.on)("didInsertElement"),a=(0,t.on)("willDestroyElement"),i=(0,t.default)("presenceUsers","currentUser.id"),o=(0,t.default)("users.length"),l={topicId:null,messageBusChannel:null,presenceUsers:null,_inserted:function(){var e=this;this.set("presenceUsers",[]),(0,s.ajax)("/presence/ping/"+this.get("topicId")).then(function(s){e.setProperties({messageBusChannel:s.messagebus_channel,presenceUsers:s.users}),e.messageBus.subscribe(s.messagebus_channel,function(s){e.set("presenceUsers",s.users)},s.messagebus_id)})},_destroyed:function(){this.get("messageBusChannel")&&(this.messageBus.unsubscribe(this.get("messageBusChannel")),this.set("messageBusChannel",null))},users:function(e,s){return(e||[]).filter(function(e){return e.id!==s})},shouldDisplay:function(e){return e>0}},n(l,"_inserted",[r],Object.getOwnPropertyDescriptor(l,"_inserted"),l),n(l,"_destroyed",[a],Object.getOwnPropertyDescriptor(l,"_destroyed"),l),n(l,"users",[i],Object.getOwnPropertyDescriptor(l,"users"),l),n(l,"shouldDisplay",[o],Object.getOwnPropertyDescriptor(l,"shouldDisplay"),l),l))}),Ember.TEMPLATES["javascripts/upgrade-header"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["unless"],[[28,["versionCheck","upToDate"]]],null,{"statements":[[0,"  "],[1,[26,["upgrade-notice"]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/upgrade-header"}}),Ember.TEMPLATES["javascripts/components/upgrade-notice"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"th",[]],[15,"colspan","5"],[13],[1,[33,["i18n"],["docker.upgrade"],null],false],[0," "],[11,"a",[]],[16,"href",[34,[[26,["href"]]]]],[15,"data-auto-route","true"],[13],[1,[33,["i18n"],["docker.perform_upgrade"],null],false],[14],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/upgrade-notice"}}),define("discourse/plugins/docker_manager/discourse/components/upgrade-notice",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"tr",href:function(){return Discourse.getURL("/admin/upgrade")}.property()})});
//# sourceMappingURL=/assets/plugin-third-party-09d03d54fd67b6e3cc3bf776d8fd201c1e8a1617bc697f57855d0f537636c46d.js.map